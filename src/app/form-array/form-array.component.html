<form [formGroup]="dynamicArray">
  <p>
    <mat-form-field appearance="outline">
      <mat-label>Name</mat-label>
      <input matInput placeholder="Name" formControlName="name" />
      <mat-error *ngIf="dynamicArray.get('name')?.hasError('required')"
        >Please Enter Name</mat-error>
    </mat-form-field>
  </p>
  <p>
    <mat-form-field appearance="outline">
      <mat-label>Age</mat-label>
      <input matInput placeholder="Name" formControlName="age" />
      <mat-error *ngIf="dynamicArray.get('age')?.hasError('required')"
        >Please Enter Age</mat-error
      >
    </mat-form-field>
  </p>
  <div formArrayName="friend">
    <div *ngFor="let friendForm of friend.controls; let i = index">
      <div [formGroupName]="i" *ngIf="i < 3">
        <p>
          <mat-form-field appearance="outline">
            <mat-label>Friend</mat-label>
            <input matInput placeholder="Name" formControlName="fname" />
            <mat-error *ngIf="friendForm.get('fname')?.hasError('required')"
              >Please Enter Name</mat-error
            >
          </mat-form-field>
        </p>
        <p (click)="removeIndex(i)">remove</p>
      </div>
    </div>
  </div>
  <p (click)="addDynamicArray()">Add</p>
</form>
